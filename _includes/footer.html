<!--
 * @Author: Conghao Wong
 * @Date: 2023-04-28 19:02:49
 * @LastEditors: Conghao Wong
 * @LastEditTime: 2024-12-25 17:09:59
 * @Description: file content
 * @Github: https://cocoon2wong.github.io
 * Copyright 2023 Conghao Wong, All Rights Reserved.
-->

<footer>
    {% if page.add-md-links %}
    <script>
        const target = document.getElementById('TABLE_OF_CONTENTS');

        $(function () {
            var titles = $("h2, h3");
            var prev_level = 99;
            var prev_id = 'null';

            for (let index = 0; index < titles.length; index++) {
                const current_title_element = titles[index];
                const current_level = Number(current_title_element.nodeName.substring(1, 2));
                const id = 'title-' + String(index) + '-' + String(current_level);
                
                var _target = target;

                if (prev_level < current_level) {
                    _target = document.getElementById('nav-' + prev_id)
                }
                
                _target.innerHTML += 
                    '<a class="nav-link nav-link-side-h' + String(current_level)  + '"' + 
                    'id=' + id + ' ' +
                    'href="#' + current_title_element.id + '">' +
                    current_title_element.innerHTML +
                    '</a>'
                ;

                if (index + 1 < titles.length) {
                    const next_title_element = titles[index + 1];
                    const next_level = Number(next_title_element.nodeName.substring(1, 2));

                    if (next_level > current_level) {
                        prev_level = current_level;
                        prev_id = id;
                        _target.innerHTML += ('<nav class="nav nav-pills flex-column" id="nav-' + id + '""></nav>');
                    }
                }
            }
            $('body').scrollspy({ target: '#navbar-left-contents', offset: 50 })
        });

    </script>
    {% endif %}
    <div class="container-md beautiful-jekyll-footer">
        <div class="row">
            <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
                {% include social-networks-links.html %}
                {% if page.footer-extra %}
                <div class="footer-custom-content">
                    {% for file in page.footer-extra %}
                    {% include {{ file }} %}
                    {% endfor %}
                </div>
                {% endif %}
                <p class="copyright text-muted">
                    {% if site.author %}
                    {{ site.author }}
                    &nbsp;&bull;&nbsp;
                    {% endif %}
                    {{ site.time | date: '%Y' }}

                    {% if site.url-pretty %}
                    &nbsp;&bull;&nbsp;
                    <span class="author-site">
                        <a
                            href="{% if site.url-canonical %}{{ site.url-canonical }}{% else %}{{ '' | absolute_url }}{% endif %}">{{
                            site.url-pretty }}</a>
                    </span>
                    {% endif %}

                    {% if site.matomo %}
                    {% if site.matomo.opt-out %}
                    &nbsp;&bull;&nbsp;
                    <a href="http://{{- site.matomo.uri -}}/index.php?module=CoreAdminHome&action=optOut"
                        target="_blank" class="text_muted">Do-not-Track</a>
                    {% endif %}
                    {% endif%}

                    {% if site.edit_page_button and site.github.repository_url %}
                    &nbsp;&bull;&nbsp;
                    <a title="Edit this page on GitHub"
                        href="{{ site.github.repository_url }}/edit/{{ site.github.source.branch }}/{{ page.path }}"
                        class="text_muted">Edit page</a>
                    {% endif%}

                </p>
                {% unless site.remove-ads %}<p class="theme-by text-muted">
                    Powered by
                    <a href="https://beautifuljekyll.com">Beautiful Jekyll</a>
                </p>{% endunless %}
            </div>
        </div>
    </div>
</footer>
